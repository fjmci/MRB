CREATE DATABASE MRB;
USE MRB;

CREATE TABLE DEPARTMENT
(
DEPARTMENT_ID TINYINT(3) primary key,
DEPARTMENT_NAME VARCHAR(50),
DEPARTMENT_DESCRIPTION VARCHAR(50)
);

CREATE TABLE MRB (
MRB_ID TINYINT(3) primary key,
DEPARTMENT_ID TINYINT(3),
TAG_NUMBER VARCHAR(25),
REVIEW_DATE DATE,
SHIFT VARCHAR(2),
OPERATION_CODE TINYINT(4),
LOT_NUMBER VARCHAR(15),
QUANTITY TINYINT(6),
COST_PER_PIECE DOUBLE(10,2),
CURRENCY VARCHAR(25),
WHO_TAGGED VARCHAR(25),
DISCREPANCY_CODE TINYINT(4),
DISPOSITION_DATE DATE,
WHO_DISPOSITION VARCHAR(25),
DISPOSITION_CODE CHAR(1),
NON_CONFORMING_PARTS TINYINT(6),
SCRAPPED_QUANTITY TINYINT(6),
TOTAL_SCRAPPED_COST DOUBLE(10,2),
SCRAPPED_PERCENT DOUBLE(5,2),
REGULATOY_COMPLIENCE VARCHAR(15),
DISCREPANCY_REPORT_NUMBER VARCHAR(25)
);

CREATE TABLE MODEL (
MODEL_ID TINYINT(10) primary key,
DEPARTMENT_ID TINYINT(3),
MODEL_TITLE VARCHAR(25),
MODEL_DESCRIPTION VARCHAR(100)
);

CREATE TABLE PART(
PART_ID TINYINT(10) primary key,
DEPARTMENT_ID TINYINT(3),
PART_TITLE VARCHAR(25),
PART_DESCRIPTION VARCHAR(100),
PART_COST DOUBLE(8,2)
);

CREATE TABLE PART_X_MODEL(
MODEL_ID TINYINT(10),
PART_ID TINYINT(10),
PART_MODEL_DESCRIPTION VARCHAR(100)
);

CREATE TABLE DEFECT (
DEFECT_ID TINYINT(4) primary key,
DEFECT_TITLE VARCHAR(125),
DEFECT_DESCRIPTION VARCHAR(100)
);

CREATE TABLE USER(
DEFECT_TITLE VARCHAR(100) NOT NULL,
DEFECT_DESCRIPTION VARCHAR(100) NOT NULL
);

ALTER TABLE MRB 
ADD CONSTRAINT FK_DEPARTMENT_ID
FOREIGN KEY (DEPARTMENT_ID) 
REFERENCES DEPARTMENT(DEPARTMENT_ID);

ALTER TABLE PART_X_MODEL
ADD CONSTRAINT FK_MODEL_ID 
FOREIGN KEY (MODEL_ID)
REFERENCES MODEL(MODEL_ID);

ALTER TABLE PART_X_MODEL
ADD CONSTRAINT FK_PART_ID 
FOREIGN KEY (PART_ID) 
REFERENCES PART(PART_ID);

ALTER TABLE PART
ADD CONSTRAINT FK_DEPARTMENT_ID_PART
FOREIGN KEY (DEPARTMENT_ID)
REFERENCES DEPARTMENT(DEPARTMENT_ID);

ALTER TABLE MODEL
ADD CONSTRAINT FK_DEPARTMENT_ID_MODEL
FOREIGN KEY (DEPARTMENT_ID)
REFERENCES DEPARTMENT(DEPARTMENT_ID);

//
INSERT INTO DEPARTMENT (DEPARTMENT_ID, DEPARTMENT_NAME, DEPARTMENT_DESCRIPTION) VALUES (001, 'ENT', 'Relieva Ultirra');